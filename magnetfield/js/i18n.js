var I18N = {
    'en': {
        'h1': "Magnetic Field Simulation",
        'author': "by MK and support by dacoconutchemist",
        'toolchoice': 'Tool: ',
        'chargelabel': "Current of the placed wire:",
        'howto-summary': "How to use",
        'howto-1': "&#x2022; To place wire, use left click for a current to us (short tap on touchscreen) or right click (long tap on touchscreen) for a current from us. The absolute value of the current is controlled by the slider above.",
        'howto-2': "&#x2022; To move wire, drag them around by their colored part.",
        'howto-3': "&#x2022; To remove wire, right click on their colored part (long tap on touchscreen).",
        'equipot-summary': "Equipotential lines",
        'slider_equipot': "Density",
        'slider_equipot_d': "Opacity",
        'slider_equipot_t': "Thickness",
        'E-summary': "Magnetic field direction",
        'slider_E': "Size",
        'slider_E_d': "Opacity",
        'slider_E_t': "Thickness",
        'check_E_head': " Arrow heads",
        'powerline-summary': "Magnetic field lines",
        'slider_powerline': "Amount",
        'slider_powerline_d': "Opacity",
        'slider_powerline_t': "Thickness",
        'slider_powerline_q': "Quality",
        'chargeunit': " A",
        'voltageunit': " V",
        'rendered': 'Image rendered (%time% ms)',
        'rendering': 'Rendering...',
        'clear': 'Delete wires',
        'reset': 'Reset all settings to default',
        'clear_msg': 'Delete existing wires? This action cannot be undone',
        'reset_msg': 'Reset all settings to their default values? This action cannot be undone',
        'color_equipot': 'Color',
        'color_powerline': 'Color',
        'color_E': 'Color',
        'bg-summary': 'Miscellaneous',
        'check_bg': ' Enable background',
        'color_bg_def': 'Default color',
        'color_pos': 'Positive color',
        'color_neg': 'Negative color',
        'color_outline': 'Charge outline color',
        'rendered_fps': 'Image rendered (%fps% FPS on average)',
        'check_anim': ' <abbr title="(not recommended for low-end devices)">Smooth mode</abbr>',
        'check_magnetic': ' Magnetic field',
        'voltage_mode': 'Relative to infinity?',
        'angle_mode': 'Measure distance',
        'currentlabel': 'Current of the placed infinite wire:',
        'currentunit': ' μA',
        'powerlineM-summary': 'Magnetic field lines',
        'B-summary': 'Magnetic field direction',
        'color_to': '"To" color',
        'color_away': '"Away" color',
        'color_outlineM': 'Wire outline color',
        'clearM': 'Delete wires',
        'clear_msgM': 'Delete existing wires? This action cannot be undone'
    },
    'ua': {
        'h1': "Симуляція Магнітного Поля",
        'author': "зроблено MK за підтримки dacoconatchemist",
        'toolchoice': 'Інструмент: ',
        'chargelabel': "Струм поставленого провідника:",
        'howto-summary': "Як користуватись",
        'howto-1': "&#x2022; Щоб поставити провідник зі струмом, скористайтесь лівою кнопкою миші для струму до нас або правою для струму від нас. Модуль струму контролюється повзунком вище.",
        'howto-2': "&#x2022; Щоб рухати провідники, перетягніть їх за забарвлену частину лівою кнопкою миші.",
        'howto-3': "&#x2022; Щоб видаляти провідники, натисніть правою кнопкою миші на їх забарвлену частину.",
        'equipot-summary': "Еквіпотенціальні лінії",
        'slider_equipot': "Щільність",
        'slider_equipot_d': "Прозорість",
        'slider_equipot_t': "Товщина",
        'E-summary': "Напрям магнітного поля",
        'slider_E': "Розмір",
        'slider_E_d': "Прозорість",
        'slider_E_t': "Товщина",
        'check_E_head': " Наконечники стрілок",
        'powerline-summary': "Лінії магнітного поля",
        'slider_powerline': "Кількість",
        'slider_powerline_d': "Прозорість",
        'slider_powerline_t': "Товщина",
        'slider_powerline_q': "Якість",
        'chargeunit': " А",
        'voltageunit': " В",
        'rendered': 'Рендеринг завершено (%time% мс)',
        'rendering': 'Рендеринг...',
        'clear': 'Видалити заряди',
        'reset': 'Повернути до початкових налаштувань',
        'clear_msg': 'Видалити існуючі провідники? Цю дію неможливо відмінити',
        'reset_msg': 'Повернути всі налаштування до їх початкових значень? Цю дію неможливо відмінити',
        'color_equipot': 'Колір',
        'color_powerline': 'Колір',
        'color_E': 'Колір',
        'bg-summary': 'Інше',
        'check_bg': ' Увімкнути фон',
        'color_bg_def': 'Колір по замовчуванню',
        'color_pos': 'Колір позитивних зарядів',
        'color_neg': 'Колір негативних зарядів',
        'color_outline': 'Колір контуру зарядів',
        'rendered_fps': 'Рендеринг завершено (%fps% FPS в сер.)',
        'check_anim': ' <abbr title="(не рекомендується для слабких пристроїв)">Плавний режим</abbr>',
        'check_magnetic': ' Магнітне поле',
        'voltage_mode': 'Відносно нескінченності?',
        'angle_mode': 'Виміряти відстань',
        'currentlabel': 'Струм в поставленому нескінченному дроті:',
        'currentunit': ' мкА',
        'powerlineM-summary': 'Лінії магнітного поля',
        'B-summary': 'Напрям магнітного поля',
        'color_to': 'Колір "до нас"',
        'color_away': 'Колір "від нас"',
        'color_outlineM': 'Колір контуру дротів',
        'clearM': 'Видалити дроти',
        'clear_msgM': 'Видалити існуючі дроти? Цю дію неможливо відмінити'
    },
    'de': {
        'h1': "Simulation des Magnetischen Feldes",
        'author': "von dacoconutchemist",
        'toolchoice': 'Instrument: ',
        'chargelabel': "Ladung des platzierten Teilchens:",
        'howto-summary': "Anleitung",
        'howto-1': "&#x2022; Zum Platzieren von Teilchen: Linksklick für positive Ladung, Rechtsklick für negative Ladung. Der Betrag der Ladung wird über den Schieberegler oben eingestellt.",
        'howto-2': "&#x2022; Zum Bewegen von Teilchen: Ziehen Sie sie mit der linken Maustaste an ihrem farbigen Teil.",
        'howto-3': "&#x2022; Zum Entfernen von Teilchen: Rechtsklick auf den farbigen Teil.",
        'equipot-summary': "Äquipotentiallinien",
        'slider_equipot': "Dichte",
        'slider_equipot_d': "Deckkraft",
        'slider_equipot_t': "Dicke",
        'E-summary': "Richtung des elektrischen Feldes",
        'slider_E': "Größe",
        'slider_E_d': "Deckkraft",
        'slider_E_t': "Dicke",
        'check_E_head': " Pfeilspitzen",
        'powerline-summary': "Elektrische Feldlinien",
        'slider_powerline': "Anzahl",
        'slider_powerline_d': "Deckkraft",
        'slider_powerline_t': "Dicke",
        'slider_powerline_q': "Qualität",
        'chargeunit': " μC",
        'voltageunit': " V",
        'rendered': 'Bild gerendert (%time% ms)',
        'rendering': 'Rendering...',
        'clear': 'Ladungen entfernen',
        'reset': 'Rückkehr zu Originaleinstellungen',
        'clear_msg': 'Alle Ladungen entfernen? Diese Aktion ist nicht rückgängig',
        'reset_msg': 'Zu Originaleinstellungen zurückkehren? Diese Aktion ist nicht rückgängig',
        'color_equipot': 'Farbe',
        'color_powerline': 'Farbe',
        'color_E': 'Farbe',
        'bg-summary': 'Sonstiges',
        'check_bg': ' Hintergrund',
        'color_bg_def': 'Standardfarbe',
        'color_pos': 'Positive Farbe',
        'color_neg': 'Negative Farbe',
        'color_outline': 'Konturfarbe der Ladungen',
        'rendered_fps': 'Bild gerendert (%fps% FPS im Durchschnitt)',
        'check_anim': ' <abbr title="(nicht empfohlen für leistungsschwache Geräte)">Kontinuierlicher Modus</abbr>',
        'check_magnetic': ' Magnetisches Feld',
        'voltage_mode': 'Relativ zur Unendlichkeit?',
        'angle_mode': 'Abstand messen',
        'currentlabel': 'Strom des platzierten unendlichen Drahtes',
        'currentunit': ' μA',
        'powerlineM-summary': 'Magnetische Feldlinien',
        'B-summary': 'Richtung des magnetischen Feldes',
        'color_to': 'Farbe "zu uns"',
        'color_away': 'Farbe "weg von uns"',
        'color_outlineM': 'Konturfarbe der Drahten',
        'clearM': 'Drahte entfernen',
        'clear_msgM': 'Alle Drähte entfernen? Diese Aktion ist nicht rückgängig'
    }
};

var LANG = 'en';

function switchLanguage(lang, magnet=0) {
    if (magnet === 0) magnet = SETTINGS.MAGNETIC;
    LANG = lang; 
    // for every translatable thing
    $('[data-i18n]').each(function() {
        var key = $(this).attr('data-i18n');
        // set translation if available, otherwise use the fallback included in
        // html and color it red for debug putposes
        if (I18N[lang]) {
            if (I18N[lang][key]) {
                $(this).html(I18N[lang][key]);
            } else {
                $(this).css("color", "red");
                console.log(`'${key}': '',`);
            }
        }
    });
    $('[data-i18n-m]').each(function() {
        var key = $(this).attr('data-i18n-m');
        if (I18N[lang]) {
            if (I18N[lang][key]) {
                if (magnet) $(this).html(I18N[lang][key]);
            } else {
                $(this).css("color", "red");
                console.log(`'${key}': '',`);
            }
        }
    });
    // this function MIGHT not yet be defined on startup sooooo
    try {
        updateJSI18N();
    } catch(e) {}
}

switchLanguage('en');

let paramLang = window.location.hash.slice(1);
if (paramLang == "en" || paramLang == "de" || paramLang == "ua") {
    switchLanguage(paramLang);
}